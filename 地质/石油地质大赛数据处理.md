参数解释：

DEPT：深度

R4：R4 在测井中一般表示“电阻率测井中最深探测层的电阻率值”，用于反映远离井壁、最接近原状地层流体性质的区域的导电特性。

GR：自然伽马测井：用于测量地层中放射性元素释放出的伽马射线强度。GR 数据可以帮助识别岩石类型

CAL：井径测量，用于测量井筒直径的变化，它可以提供关于井壁稳定性和井眼规则性的信息



KB：KB高度通常是指地面到钻井平台表面（即凯利旋塞所在位置）的垂直距离。因此，KB常被用作参考点来测量井深，特别是在描述从地面到井底的总深度时。

MD：沿着井眼轨迹实际测量得到的深度，也就是从井口（通常是通过KB点）到井下任意一点沿井筒路径的实际长度。



电阻率类（反映底层导电性）：判断地层含油性、识别油层、气层与水层。

| 缩写     | 全称                        | 含义                                                 |
| -------- | --------------------------- | ---------------------------------------------------- |
| **MSFL** | Micro Spherical Focused Log | 微球聚焦电阻率，表示井壁附近（冲洗带）的电阻率       |
| **COND** | Conductivity                | 电导率（电阻率的倒数），有时与深电阻率或浅电阻率有关 |
| **LLS**  | Laterolog Shallow           | 浅探测电阻率（Laterolog仪器）                        |
| **LLD**  | Laterolog Deep              | 深探测电阻率，反映侵入带外地层的电阻率               |
| **ILM**  | Induction Log Medium        | 中探测电阻率（感应测井）                             |
| **ILD**  | Induction Log Deep          | 深感应电阻率，常用于评价未被泥浆侵入的原状地层       |
| **MLL**  | Microlaterolog              | 微型电阻率测井，用于测量冲洗带的电阻率               |



自然电位类

| 缩写   | 全称                  | 含义                                                         |
| ------ | --------------------- | ------------------------------------------------------------ |
| **SP** | Spontaneous Potential | 自然电位曲线，反映泥浆和地层水之间的电化学势差，用于确定渗透性层位和泥岩/砂岩界面 |



密度、声波、孔隙度类：综合判断岩性、孔隙度、含流体性质等。

| 缩写            | 全称                                | 含义                                                         |
| --------------- | ----------------------------------- | ------------------------------------------------------------ |
| **DEN**         | Density Log                         | 密度测井，用于计算地层密度和推断孔隙度                       |
| **AC** / **DT** | Acoustic Travel Time (or Sonic Log) | 声波时差，反映声波在地层中的传播速度，常用于计算孔隙度或地层强度 |
| **CNL**         | Compensated Neutron Log             | 补偿中子测井，反映氢含量，用于估算地层孔隙度（尤其是饱水孔隙度） |



**Laterolog**（LLD/LLS）：适用于盐水泥浆环境

**Induction**（ILD/ILM）：适用于不导电泥浆（如油基泥浆）

**MSFL/MLL**：更贴近井壁，反映冲洗带信息

**CNL 与 DEN** 通常一起分析，用于判断气层（密度孔隙度＞中子孔隙度）

**SP 曲线** 结合电阻率曲线可识别渗透层



A1：

|      | AC   | CNL  | DEN  | GR   | LLD  | LLS  | MSFL | PEF  | R4   |      | ILD  | ILM  |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

A2：

|      | AC   | CNL  | DEN  | GR   | LLD  | LLS  | MSFL | PEF  | R4   | CAL  | ILD  | ILM  |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |



A3：

| SP   | AC   | CNL  | DEN  | GR   | LLD  | LLS  | MSFL | PEF  | R4   | CAL  | ILD  | ILM  |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

A4：

|      | AC   | CNL  | DEN  | GR   | LLD  | LLS  | MSFL | PEF  | R4   | CAL  | ILD  | ILM  |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

A5：

|      | AC   |      | DEN  | GR   | LLD  | LLS  | MSFL | PEF  |      |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |



A6：

|      | AC   | CNL  | DEN  | GR   | LLD  | LLS  | MSFL |      | R4   | CAL  | ILD  | ILM  |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

A7：

| SP   | AC   |      |      | GR   |      |      |      |      | R4   | CAL  |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

MLL、COND、

A8：

|      | AC   |      | DEN  | GR   | LLD  | LLS  | MSFL |      | R4   |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

A9:

|      | AC   |      | DEN  | GR   | LLD  | LLS  | MSFL | PEF  | R4   |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

A10:

|      | AC   | CNL  | DEN  | GR   | LLD  | LLS  | MSFL | PEF  | R4   | CAL  | ILD  | ILM  |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

A11:

|      | AC   |      | DEN  | GR   | LLD  | LLS  |      |      | R4   |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

A12:

|      | AC   |      | DEN  | GR   | LLD  | LLS  | MSFL | PEF  | R4   | CAL  | ILD  | ILM  |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

A13：（测井数据2）

|      | AC   |      | DEN  | GR   | LLD  | LLS  | MSFL |      | R4   | CAL  |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

COND

A14:

|      | AC   |      | GR   | LLD  | LLS  |      |      |      | R4   |      | ILD  | ILM  |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

A15：

|      | AC 7 |      |      | GR 2 | LLD 6 | LLS 3 | MSFL |      | R4 9 | CAL 4 |      |      |
| ---- | ---- | ---- | ---- | ---- | ----- | ----- | ---- | ---- | ---- | ----- | ---- | ---- |

A16:

|      | AC   |      | DEN  | GR   | LLD  | LLS  | MSFL |      | R4   | CAL  |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

COND

A17:

|      | AC   |      | DEN  | GR   | LLD  | LLS  | MSFL |      | R4   |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

A18:

|      | AC   |      | DEN  | GR   | LLD  | LLS  | MSFL |      | R4   |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

A19:

|      | AC   |      | DEN  | GR   | LLD  | LLS  |      |      | R4   |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

A20:

|      | AC   |      | DEN  | GR   | LLD  | LLS  | MSFL | PEF  | R4   |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

A21:

|      | AC   |      | DEN  | GR   |      |      |      |      | R4   |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

A22:

|      | AC   |      |      | GR   |      |      |      |      | R4   |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

RXO

A23:

|      | AC   |      | DEN  | GR   |      |      | MSFL |      | R4   |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

A24:

|      | AC   |      | DEN  | GR   | LLD  | LLS  | MSFL |      | R4   |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |

AC2 DEN1

A25:

|      | AC   |      | DEN  | GR   | LLD  | LLS  |      |      | R4   |      |      |      |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |





8、9、11没有岩性数据

10、12的岩性数据不能用



读取的 有对应岩性数据的井:

A1

A2

A3

A4

A5

A6

A7

A13



A14

A15

A16

共11口井

这样分有问题：A14里面出现的“白色盐岩” 在之前没见过，那么就没办法给它编码





catBoost示例代码：

```
from catboost import CatBoostClassifier

# 假设你已生成包含所有曲线（即全集）的 dataframe
df.fillna(value=np.nan, inplace=True)  # 缺的特征保留 NaN

model = CatBoostClassifier(iterations=500, depth=6, learning_rate=0.1, verbose=100)
model.fit(X_train, y_train)
```



```py
model = CatBoostClassifier(
    iterations=1000, #训练迭代次数，也就是构建多少棵决策树，值越大模型越复杂，可能越准确但也更容易过拟合
    learning_rate=0.05, #学习率 常见为0.01~0.3
    depth=6, # 每棵树的最大深度 树越深表达能力越强但也容易过拟合 4~10调优
    loss_function='MultiClass', #指定损失函数
    eval_metric='Accuracy', #正确率作为评估指标
    verbose=100, #每100次迭代输出一次训练信息
    random_seed=42 #随机种子
)
```



 iterations=1000，learning_rate=0.05，depth=6时：

```
0:	learn: 0.6632000	test: 0.6654080	best: 0.6654080 (0)	total: 161ms	remaining: 2m 40s
100:	learn: 0.7277760	test: 0.7256960	best: 0.7256960 (100)	total: 16.9s	remaining: 2m 30s
200:	learn: 0.7448640	test: 0.7394560	best: 0.7399040 (194)	total: 33s	remaining: 2m 11s
300:	learn: 0.7562720	test: 0.7502080	best: 0.7502080 (298)	total: 51s	remaining: 1m 58s
400:	learn: 0.7676480	test: 0.7604480	best: 0.7604480 (400)	total: 1m 8s	remaining: 1m 42s
500:	learn: 0.7769440	test: 0.7656320	best: 0.7656320 (499)	total: 1m 25s	remaining: 1m 25s
600:	learn: 0.7853440	test: 0.7708160	best: 0.7709440 (597)	total: 1m 41s	remaining: 1m 7s
700:	learn: 0.7935840	test: 0.7753600	best: 0.7754240 (697)	total: 1m 58s	remaining: 50.6s
800:	learn: 0.8018080	test: 0.7803520	best: 0.7804800 (797)	total: 2m 15s	remaining: 33.7s
900:	learn: 0.8089120	test: 0.7853440	best: 0.7853440 (900)	total: 2m 32s	remaining: 16.8s
999:	learn: 0.8152480	test: 0.7893760	best: 0.7895040 (998)	total: 2m 48s	remaining: 0us

bestTest = 0.789504
bestIteration = 998

Shrink model to first 999 iterations.
验证集准确率： 0.789504
```

```
              precision    recall  f1-score   support

          未知       0.00      0.00      0.00       730
          泥岩       0.26      0.86      0.40      4367
       泥质粉砂岩       0.00      0.00      0.00       714
      浅灰色粉砂岩       0.00      0.00      0.00        47
    浅灰色荧光粉砂岩       0.00      0.00      0.00       100
       深灰色泥岩       0.00      0.00      0.00       369
    深灰色白云质泥岩       0.00      0.00      0.00         4
     深灰色砂质泥岩       0.00      0.00      0.00        20
    深灰色钙芒硝泥岩       0.00      0.00      0.00         8
        灰色泥岩       0.00      0.00      0.00      2508
     灰色泥质粉砂岩       0.00      0.00      0.00        96
     灰色白云质泥岩       0.00      0.00      0.00        14
    灰色白云质粉砂岩       0.00      0.00      0.00         3
      灰色砂质泥岩       0.00      0.00      0.00       125
       灰色粉砂岩       0.00      0.00      0.00       386
   灰色荧光泥质粉砂岩       0.00      0.00      0.00         2
     灰色荧光粉砂岩       0.00      0.00      0.00         6
     灰褐色油斑泥岩       0.00      0.00      0.00        25
  灰褐色油斑白云质泥岩       0.00      0.00      0.00        38
    灰褐色油斑粉砂岩       0.00      0.00      0.00        72
  灰褐色油斑钙芒硝泥岩       0.00      0.00      0.00         2
     灰褐色油浸泥岩       0.00      0.00      0.00       270
       白云质泥岩       0.00      0.00      0.00        40
        白色盐岩       0.00      0.00      0.00      3045
          盐层       0.46      0.94      0.62      4540
        盐质泥岩       0.00      0.00      0.00       100
       石膏质泥岩       0.00      0.00      0.00      3423
        砂质泥岩       0.00      0.00      0.00       778
         粉砂岩       1.00      0.07      0.12      1981
       粉砂质泥岩       0.00      0.00      0.00        40
         膏盐岩       0.00      0.00      0.00         0
  褐灰色油迹白云质泥岩       0.00      0.00      0.00        26
    褐灰色油迹粉砂岩       0.00      0.00      0.00        21
  褐灰色油迹钙芒硝泥岩       0.00      0.00      0.00        13
  黄褐色荧光泥质白云岩       0.00      0.00      0.00         3

    accuracy                           0.34     23916
   macro avg       0.05      0.05      0.03     23916
weighted avg       0.22      0.34      0.20     23916
```

iterations=2000，learning_rate=0.03，depth=8时：

```
0:	learn: 0.6967040	test: 0.6963200	best: 0.6963200 (0)	total: 415ms	remaining: 13m 49s
100:	learn: 0.7292960	test: 0.7273600	best: 0.7273600 (100)	total: 36.5s	remaining: 11m 25s
200:	learn: 0.7457920	test: 0.7415040	best: 0.7415040 (200)	total: 1m 11s	remaining: 10m 40s
300:	learn: 0.7596960	test: 0.7531520	best: 0.7531520 (300)	total: 1m 48s	remaining: 10m 10s
400:	learn: 0.7705440	test: 0.7607680	best: 0.7607680 (400)	total: 2m 24s	remaining: 9m 35s
500:	learn: 0.7803520	test: 0.7677440	best: 0.7677440 (500)	total: 2m 59s	remaining: 8m 57s
600:	learn: 0.7911680	test: 0.7746560	best: 0.7747840 (597)	total: 3m 29s	remaining: 8m 7s
700:	learn: 0.8005440	test: 0.7806080	best: 0.7806080 (700)	total: 4m 1s	remaining: 7m 27s
800:	learn: 0.8088320	test: 0.7843840	best: 0.7844480 (799)	total: 4m 33s	remaining: 6m 48s
900:	learn: 0.8172960	test: 0.7889920	best: 0.7889920 (897)	total: 5m 5s	remaining: 6m 12s
1000:	learn: 0.8253760	test: 0.7934080	best: 0.7935360 (998)	total: 5m 36s	remaining: 5m 35s
1100:	learn: 0.8323040	test: 0.7982080	best: 0.7982080 (1097)	total: 6m 6s	remaining: 4m 59s
1200:	learn: 0.8385120	test: 0.8005120	best: 0.8005120 (1198)	total: 6m 37s	remaining: 4m 24s
1300:	learn: 0.8445440	test: 0.8037760	best: 0.8038400 (1294)	total: 7m 9s	remaining: 3m 50s
1400:	learn: 0.8497120	test: 0.8071040	best: 0.8071040 (1399)	total: 7m 41s	remaining: 3m 17s
1500:	learn: 0.8554720	test: 0.8097920	best: 0.8099840 (1496)	total: 8m 15s	remaining: 2m 44s
1600:	learn: 0.8609440	test: 0.8120320	best: 0.8120960 (1598)	total: 8m 50s	remaining: 2m 12s
1700:	learn: 0.8660160	test: 0.8139520	best: 0.8140800 (1699)	total: 9m 26s	remaining: 1m 39s
1800:	learn: 0.8705440	test: 0.8164480	best: 0.8167040 (1794)	total: 10m 3s	remaining: 1m 6s
1900:	learn: 0.8755360	test: 0.8201600	best: 0.8202880 (1898)	total: 10m 40s	remaining: 33.4s
1999:	learn: 0.8798880	test: 0.8224640	best: 0.8225920 (1998)	total: 11m 18s	remaining: 0us

bestTest = 0.822592
bestIteration = 1998

Shrink model to first 1999 iterations.
验证集准确率： 0.822592

分类报告：
               precision    recall  f1-score   support

      含砾砂质泥岩       0.67      0.67      0.67         3
          未知       0.89      0.87      0.88      1008
         油页岩       0.80      0.21      0.34       113
          泥岩       0.81      0.94      0.87      6628
     泥岩(粘土岩)       0.80      0.91      0.85      1908
        泥质盐岩       0.83      0.61      0.70        56
       泥质粉砂岩       0.74      0.26      0.38       433
        灰质泥岩       0.90      0.79      0.84        47
       灰质粉砂岩       0.67      0.21      0.32        19
       白云质泥岩       0.82      0.44      0.57        75
      白云质粉砂岩       1.00      1.00      1.00         3
      白云质细砂岩       1.00      0.33      0.50         3
          盐层       0.88      0.88      0.88      1761
          盐岩       1.00      0.20      0.33         5
       石盐质泥岩       0.74      0.77      0.75        26
       石膏质泥岩       0.81      0.47      0.60       566
        砂质泥岩       0.77      0.46      0.57       760
         粉砂岩       0.83      0.69      0.75      2044
         细砂岩       0.81      0.83      0.82        30
         膏盐岩       0.83      0.76      0.80       118
          页岩       1.00      0.37      0.54        19

    accuracy                           0.82     15625
   macro avg       0.84      0.60      0.67     15625
weighted avg       0.82      0.82      0.81     15625
```

```
              precision    recall  f1-score   support

          未知       0.00      0.00      0.00       730
          泥岩       0.26      0.90      0.40      4367
       泥质粉砂岩       0.00      0.00      0.00       714
      浅灰色粉砂岩       0.00      0.00      0.00        47
    浅灰色荧光粉砂岩       0.00      0.00      0.00       100
       深灰色泥岩       0.00      0.00      0.00       369
    深灰色白云质泥岩       0.00      0.00      0.00         4
     深灰色砂质泥岩       0.00      0.00      0.00        20
    深灰色钙芒硝泥岩       0.00      0.00      0.00         8
        灰色泥岩       0.00      0.00      0.00      2508
     灰色泥质粉砂岩       0.00      0.00      0.00        96
     灰色白云质泥岩       0.00      0.00      0.00        14
    灰色白云质粉砂岩       0.00      0.00      0.00         3
      灰色砂质泥岩       0.00      0.00      0.00       125
       灰色粉砂岩       0.00      0.00      0.00       386
   灰色荧光泥质粉砂岩       0.00      0.00      0.00         2
     灰色荧光粉砂岩       0.00      0.00      0.00         6
     灰褐色油斑泥岩       0.00      0.00      0.00        25
  灰褐色油斑白云质泥岩       0.00      0.00      0.00        38
    灰褐色油斑粉砂岩       0.00      0.00      0.00        72
  灰褐色油斑钙芒硝泥岩       0.00      0.00      0.00         2
     灰褐色油浸泥岩       0.00      0.00      0.00       270
       白云质泥岩       0.00      0.00      0.00        40
        白色盐岩       0.00      0.00      0.00      3045
          盐层       0.49      0.91      0.63      4540
        盐质泥岩       0.00      0.00      0.00       100
       石膏质泥岩       0.00      0.00      0.00      3423
        砂质泥岩       0.00      0.00      0.00       778
         粉砂岩       0.96      0.04      0.08      1981
       粉砂质泥岩       0.00      0.00      0.00        40
         膏盐岩       0.00      0.00      0.00         0
  褐灰色油迹白云质泥岩       0.00      0.00      0.00        26
    褐灰色油迹粉砂岩       0.00      0.00      0.00        21
  褐灰色油迹钙芒硝泥岩       0.00      0.00      0.00        13
  黄褐色荧光泥质白云岩       0.00      0.00      0.00         3

    accuracy                           0.34     23916
   macro avg       0.05      0.05      0.03     23916
weighted avg       0.22      0.34      0.20     23916
```



# 保存模型
model.save_model("catboost_lithology_model.cbm")

# 加载模型
model = CatBoostClassifier()
model.load_model("catboost_lithology_model.cbm")
