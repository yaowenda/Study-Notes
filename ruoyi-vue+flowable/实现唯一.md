服务实现：

```java
@Override
    public boolean checkCategoryNumberUnique(CommodityClassification commodityClassification){
        Long id = StringUtils.isNull(commodityClassification.getId()) ? -1L : commodityClassification.getId();
        CommodityClassification info = commodityClassificationMapper.checkCategoryNumberUnique(commodityClassification.getCategoryNumber());
        if(StringUtils.isNotNull(info) && info.getId().longValue() != id.longValue()){
            return UserConstants.NOT_UNIQUE;
        }
        return UserConstants.UNIQUE;

    }
```

controller

```
/**
     * 新增商品分类
     */
    @PreAuthorize("@ss.hasPermi('classification:classification:add')")
    @Log(title = "商品分类", businessType = BusinessType.INSERT)
    @PostMapping
    public AjaxResult add(@Validated @RequestBody CommodityClassification commodityClassification)
    {
        if(!commodityClassificationService.checkCategoryNumberUnique(commodityClassification)){
            return error("新增商品分类失败，商品分类编号" + commodityClassification.getCategoryNumber() + "已存在");
        }
        commodityClassification.setCreatedBy(SecurityUtils.getLoginUser().getUser().getNickName());
        commodityClassification.setCreatedAt(new Date());
        commodityClassification.setDelFlag("0");
        return toAjax(commodityClassificationService.insertCommodityClassification(commodityClassification));
    }
```

mapper

```
public CommodityClassification checkCategoryNumberUnique(@Param("categoryNumber") String categoryNumber);
```



```
<select id="checkCategoryNumberUnique" parameterType="String" resultMap="CommodityClassificationResult">
        <include refid="selectCommodityClassificationVo"/>
        where cc1.category_number = #{categoryNumber} and cc1.del_flag = '0'
    </select>
```

