```sql
<select id="getWarehouseDetailByKeyword" parameterType="map" resultType="map">
        SELECT
        wm.warehouse_id,
        wm.warehouse_encoding,
        wm.warehouse_name,
        wm.warehouse_province,
        wm.warehouse_city,
        wm.warehouse_county,
        wm.warehouse_detail,
        wm.responsible_person
        FROM warehouse_management wm
        <where>
		   wm.del_flag = '0'
            <if test="type == 'number'">
                AND wm.warehouse_encoding LIKE CONCAT('%', #{keyword}, '%')
            </if>
            <if test="type == 'name'">
                AND wm.warehouse_name LIKE CONCAT('%', #{keyword}, '%')
            </if>
        </where>
        LIMIT 50
    </select>
```

```
graph TD
    subgraph "1. 准备阶段"
    Input[Src Tokens<br>形状: 2 x 3<br>(Batch, Seq)] -->|查字典| Embed[Embedding<br>形状: 2 x 3 x 256<br>(Batch, Seq, Dim)]
    end

    subgraph "2. 维度调整 (关键!)"
    Embed -->|Transpose(0, 1)| TimeFirst[转置输入<br>形状: 3 x 2 x 256<br>(Seq, Batch, Dim)]
    end

    subgraph "3. 双向 RNN 核心处理"
    TimeFirst --> GRU_Box[双向 GRU 计算]
    
    GRU_Box -->|每个时刻的理解| Output_Raw[Outputs<br>形状: 3 x 2 x 1024<br>(Seq, Batch, Hidden*2)]
    
    GRU_Box -->|全句读完后的总结| Hidden_Raw[Final Hiddens<br>形状: 2 x 2 x 512<br>(Layers*2, Batch, Hidden)]
    end

    subgraph "4. 整理输出"
    Output_Raw -->|Dropout| Final_Out[Outputs<br>供 Attention 使用]
    
    Hidden_Raw -->|combine_bidir<br>拼接正反向| Final_Hidden[Final Hiddens<br>形状: 1 x 2 x 1024<br>(Layers, Batch, Hidden*2)<br>供 Decoder 初始化]
    
    Input -->|检测 Padding| Mask[Padding Mask<br>形状: 3 x 2<br>告诉 Attention 哪里别看]
    end
```

**Batch Size = 5**: 这一批有 **5 个句子**。

**Seq Len = 4**: 每个句子有 **4 个单词** (Token)。

**Embed Dim = 10**: 每个单词由 **10 个数字** 来描述特征。

```
tensor = [
  # -------------------- 第 1 个句子 (Batch Index 0) --------------------
  [
    # 第1个词 (比如 "I") 的向量 (10个特征)
    [ 0.1, -0.2,  0.5,  0.0,  0.9, -1.2,  0.3,  0.1, -0.5,  1.1],
    
    # 第2个词 (比如 "love") 的向量
    [ 0.8,  0.9, -0.1,  0.4,  0.2,  0.5, -0.9,  1.2,  0.0, -0.3],
    
    # 第3个词 (比如 "AI") 的向量
    [-0.5,  0.2,  0.3,  0.8, -0.4,  1.0,  0.1, -0.2,  0.7,  0.5],
    
    # 第4个词 (比如 ".") 的向量
    [ 0.0,  0.1,  0.1, -0.1,  0.0,  0.2, -0.1,  0.0,  0.1, -0.2]
  ], 

  # -------------------- 第 2 个句子 (Batch Index 1) --------------------
  [
    # 第1个词 (比如 "The")
    [ 1.2, -0.5,  0.1, ... (共10个数字) ... ],
    # 第2个词 (比如 "cat")
    [ 0.3,  0.8, -0.2, ... (共10个数字) ... ],
    # 第3个词 (比如 "is")
    [ 0.5, -0.1,  0.0, ... (共10个数字) ... ],
    # 第4个词 (比如 "big")
    [ 0.9,  0.2, -0.5, ... (共10个数字) ... ]
  ],

  # -------------------- 第 3 个句子 (Batch Index 2) --------------------
  [
    [ ... 10个数字 ... ], # 词 1
    [ ... 10个数字 ... ], # 词 2
    [ ... 10个数字 ... ], # 词 3
    [ ... 10个数字 ... ]  # 词 4
  ],

  # -------------------- 第 4 个句子 (Batch Index 3) --------------------
  [
    [ ... 10个数字 ... ],
    [ ... 10个数字 ... ],
    [ ... 10个数字 ... ],
    [ ... 10个数字 ... ]
  ],

  # -------------------- 第 5 个句子 (Batch Index 4) --------------------
  [
    [ ... 10个数字 ... ],
    [ ... 10个数字 ... ],
    [ ... 10个数字 ... ],
    [ ... 10个数字 ... ]
  ]
]
```

